<template>
    <v-container fluid class="pa-8 all-content">
      <v-row class="first-row ms-5" cols="12">
        <v-col cols="" class="nav">
          <span class="all-assessment"><span class="me-3"><img src="../assets/cross.svg" alt=""></span> National Level Scholarship  </span>
          <v-chip
            class="ma-0 ms-4"
            small
            >
           Secondary
         </v-chip>
         <v-chip
            class="ma-1"
            small
            >
            Primary
         </v-chip>

         <v-chip
            class="ma-0"
            small
            >
          3+
         </v-chip>
         <v-col class="d-flex mt-2" cols="2">
                  <span class="me-2"
                    ><img src="../assets/users.svg" alt=""
                  /></span>
                  <span class=""> 400</span>
        </v-col>
                 

        </v-col>
       <v-col cols="" class="nav">
        <v-col cols="1">
            <v-div cols="" class="nav-div">
                <v-col class="d-flex mt-2" cols="">
                    <span class="me-2"
                        ><img src="../assets/users.svg" alt=""
                    /></span>
                    <span class=""> 325</span>
                </v-col>
            </v-div>
        </v-col>
        <v-col cols="1">
            <v-div cols="" class="nav-div1 mb-5">
                <v-col class="" >
                    <span class="timer me-1"> Timer <span class="timer-heading">10 </span>hh </span>
                    <span class="me-1"><span class="timer-heading">10 </span>mm</span> 
                    <span class=""><span class="timer-heading">10 </span>ss</span>
                </v-col>
            </v-div>
        </v-col> 
       </v-col>
      </v-row>
  
      <v-div cols="12">
       
        <v-col class="main-outer">
            <v-row class="mt-0 ms-0">
                <v-div cols="4" class="me-2">
                    <v-col cols="" class="outer-border">
                        <v-row class="mb-0">
                            <v-col>
                            <v-chip
                                class="scholarship-red-btn"
                                color=""
                                text-color="white"
                            >
                            High
                            </v-chip>
                            </v-col>
                        </v-row>
                        <v-row>
                            
                        </v-row>
                    <v-card
                        class="user-card mb-3"
                        max-width="388"
                        max-height="147"
                        outlined
                        >
                        <div class="ms-5 mt-3">
                    
                            <v-row>
                                <v-col class="d-flex">
                                    <span class="mt-1" cols="1"
                                        ><img src="../assets/user-icon.svg" alt="">
                                    </span>
                                </v-col>
                                <v-col cols="7" class="logo-name">
                                    <span class="cameron"> Cameron Williamson </span>
                                    <span class="hash"> #025622 </span>
                                </v-col>
                                <v-col cols="">
                                    <v-chip
                                        class="chip"
                                        color="red"
                                        label
                                        text-color="white"
                                        >
                                        <v-icon left>
                                            mdi-account-circle
                                        </v-icon>
                                        60
                                    </v-chip>
                                </v-col>
                            </v-row>
                            <v-row class="ms-1 mt-1 mb-2">
                                <v-col cols="">
                                    <img src="../assets/info.svg" alt="">
                                </v-col>
                                <v-col cols="">
                                    <img src="../assets/flag.svg" alt="">
                                </v-col>
                                <v-col cols="">
                                <img src="../assets/octagon.svg" alt="">
                                </v-col>
                                <v-col cols="">
                                <img src="../assets/left.svg" alt="">
                                </v-col>
                            </v-row>
                        
                        
                        </div>
                    </v-card>
                    <v-card
                        class="user-card mb-3"
                        max-width="388"
                        max-height="147"
                        outlined
                        >
                        <div class="ms-5 mt-3">
                    
                            <v-row>
                                <v-col class="d-flex">
                                    <span class="mt-1" cols="1"
                                        ><img src="../assets/user-icon.svg" alt="">
                                    </span>
                                </v-col>
                                <v-col cols="7" class="logo-name">
                                    <span class="cameron"> Cameron Williamson </span>
                                    <span class="hash"> #025622 </span>
                                </v-col>
                                <v-col cols="">
                                    <v-chip
                                        class="chip"
                                        color="red"
                                        label
                                        text-color="white"
                                        >
                                        <v-icon left>
                                            mdi-account-circle
                                        </v-icon>
                                        60
                                    </v-chip>
                                </v-col>
                            </v-row>
                            <v-row class="ms-1 mt-1 mb-2">
                                <v-col cols="">
                                    <img src="../assets/info.svg" alt="">
                                </v-col>
                                <v-col cols="">
                                    <img src="../assets/flag.svg" alt="">
                                </v-col>
                                <v-col cols="">
                                <img src="../assets/octagon.svg" alt="">
                                </v-col>
                                <v-col cols="">
                                <img src="../assets/left.svg" alt="">
                                </v-col>
                            </v-row>
                        
                        
                        </div>
                    </v-card>
                    <v-card
                        class="user-card mb-2"
                        max-width="388"
                        max-height="147"
                        outlined
                        >
                        <div class="ms-5 mt-3">
                    
                            <v-row>
                                <v-col class="d-flex">
                                    <span class="mt-1" cols="1"
                                        ><img src="../assets/user-icon.svg" alt="">
                                    </span>
                                </v-col>
                                <v-col cols="7" class="logo-name">
                                    <span class="cameron"> Cameron Williamson </span>
                                    <span class="hash"> #025622 </span>
                                </v-col>
                                <v-col cols="">
                                    <v-chip
                                        class="chip"
                                        color="red"
                                        label
                                        text-color="white"
                                        >
                                        <v-icon left>
                                            mdi-account-circle
                                        </v-icon>
                                        60
                                    </v-chip>
                                </v-col>
                            </v-row>
                            <v-row class="ms-1 mt-1 mb-2">
                                <v-col cols="">
                                    <img src="../assets/info.svg" alt="">
                                </v-col>
                                <v-col cols="">
                                    <img src="../assets/flag.svg" alt="">
                                </v-col>
                                <v-col cols="">
                                <img src="../assets/octagon.svg" alt="">
                                </v-col>
                                <v-col cols="">
                                <img src="../assets/left.svg" alt="">
                                </v-col>
                            </v-row>
                        
                        
                        </div>
                    </v-card>
                    </v-col>
                </v-div>
                <v-div cols="4" class="me-2">
                    <v-col cols="" class="orange-border">
                        <v-row class="mb-0">
                            <v-col>
                            <v-chip
                                class="scholarship-orange-btn"
                                color=""
                                text-color="white"
                            >
                            Medium
                            </v-chip>
                            </v-col>
                        </v-row>
                        <v-row>
                            
                        </v-row>
                    <v-card
                        class="user-card mb-3"
                        max-width="388"
                        max-height="147"
                        outlined
                        >
                        <div class="ms-5 mt-3">
                    
                            <v-row>
                                <v-col class="d-flex">
                                    <span class="mt-1" cols="1"
                                        ><img src="../assets/user-icon.svg" alt="">
                                    </span>
                                </v-col>
                                <v-col cols="7" class="logo-name">
                                    <span class="cameron"> Cameron Williamson </span>
                                    <span class="hash"> #025622 </span>
                                </v-col>
                                <v-col cols="">
                                    <v-chip
                                        class="orange-chip"
                                        color=""
                                        label
                                        text-color="white"
                                        >
                                        <v-icon left>
                                            mdi-account-circle
                                        </v-icon>
                                        60
                                    </v-chip>
                                </v-col>
                            </v-row>
                            <v-row class="ms-1 mt-1 mb-2">
                                <v-col cols="">
                                    <img src="../assets/info.svg" alt="">
                                </v-col>
                                <v-col cols="">
                                    <img src="../assets/flag.svg" alt="">
                                </v-col>
                                <v-col cols="">
                                <img src="../assets/octagon.svg" alt="">
                                </v-col>
                                <v-col cols="">
                                <img src="../assets/left.svg" alt="">
                                </v-col>
                            </v-row>
                        
                        
                        </div>
                    </v-card>
                    <v-card
                        class="user-card mb-3"
                        max-width="388"
                        max-height="147"
                        outlined
                        >
                        <div class="ms-5 mt-3">
                    
                            <v-row>
                                <v-col class="d-flex">
                                    <span class="mt-1" cols="1"
                                        ><img src="../assets/user-icon.svg" alt="">
                                    </span>
                                </v-col>
                                <v-col cols="7" class="logo-name">
                                    <span class="cameron"> Cameron Williamson </span>
                                    <span class="hash"> #025622 </span>
                                </v-col>
                                <v-col cols="">
                                    <v-chip
                                        class="orange-chip"
                                        color=""
                                        label
                                        text-color="white"
                                        >
                                        <v-icon left>
                                            mdi-account-circle
                                        </v-icon>
                                        60
                                    </v-chip>
                                </v-col>
                            </v-row>
                            <v-row class="ms-1 mt-1 mb-2">
                                <v-col cols="">
                                    <img src="../assets/info.svg" alt="">
                                </v-col>
                                <v-col cols="">
                                    <img src="../assets/flag.svg" alt="">
                                </v-col>
                                <v-col cols="">
                                <img src="../assets/octagon.svg" alt="">
                                </v-col>
                                <v-col cols="">
                                <img src="../assets/left.svg" alt="">
                                </v-col>
                            </v-row>
                        
                        
                        </div>
                    </v-card>
                    <v-card
                        class="user-card mb-2"
                        max-width="388"
                        max-height="147"
                        outlined
                        >
                        <div class="ms-5 mt-3">
                    
                            <v-row>
                                <v-col class="d-flex">
                                    <span class="mt-1" cols="1"
                                        ><img src="../assets/user-icon.svg" alt="">
                                    </span>
                                </v-col>
                                <v-col cols="7" class="logo-name">
                                    <span class="cameron"> Cameron Williamson </span>
                                    <span class="hash"> #025622 </span>
                                </v-col>
                                <v-col cols="">
                                    <v-chip
                                        class="orange-chip"
                                        color=""
                                        label
                                        text-color="white"
                                        >
                                        <v-icon left>
                                            mdi-account-circle
                                        </v-icon>
                                        60
                                    </v-chip>
                                </v-col>
                            </v-row>
                            <v-row class="ms-1 mt-1 mb-2">
                                <v-col cols="">
                                    <img src="../assets/info.svg" alt="">
                                </v-col>
                                <v-col cols="">
                                    <img src="../assets/flag.svg" alt="">
                                </v-col>
                                <v-col cols="">
                                <img src="../assets/octagon.svg" alt="">
                                </v-col>
                                <v-col cols="">
                                <img src="../assets/left.svg" alt="">
                                </v-col>
                            </v-row>
                        
                        
                        </div>
                    </v-card>
                    </v-col>
                </v-div>
                <v-div cols="4">
                    <v-col cols="" class="green-border">
                        <v-row class="mb-0">
                            <v-col>
                            <v-chip
                                class="scholarship-green-btn"
                                text-color="white"
                            >
                            Low
                            </v-chip>
                            </v-col>
                        </v-row>
                        <v-row>
                            
                        </v-row>
                    <v-card
                        class="user-card mb-3"
                        max-width="388"
                        max-height="147"
                        outlined
                        >
                        <div class="ms-5 mt-3">
                    
                            <v-row>
                                <v-col class="d-flex">
                                    <span class="mt-1" cols="1"
                                        ><img src="../assets/user-icon.svg" alt="">
                                    </span>
                                </v-col>
                                <v-col cols="7" class="logo-name">
                                    <span class="cameron"> Cameron Williamson </span>
                                    <span class="hash"> #025622 </span>
                                </v-col>
                                <v-col cols="">
                                    <v-chip
                                        class="green-chip"
                                        color=""
                                        label
                                        text-color=""
                                        >
                                        <v-icon left>
                                            mdi-account-circle
                                        </v-icon>
                                        60
                                    </v-chip>
                                </v-col>
                            </v-row>
                            <v-row class="ms-1 mt-1 mb-2">
                                <v-col cols="">
                                    <img src="../assets/info.svg" alt="">
                                </v-col>
                                <v-col cols="">
                                    <img src="../assets/flag.svg" alt="">
                                </v-col>
                                <v-col cols="">
                                <img src="../assets/octagon.svg" alt="">
                                </v-col>
                                <v-col cols="">
                                <img src="../assets/left.svg" alt="">
                                </v-col>
                            </v-row>
                        
                        
                        </div>
                    </v-card>
                    <v-card
                        class="user-card mb-3"
                        max-width="388"
                        max-height="147"
                        outlined
                        >
                        <div class="ms-5 mt-3">
                    
                            <v-row>
                                <v-col class="d-flex">
                                    <span class="mt-1" cols="1"
                                        ><img src="../assets/user-icon.svg" alt="">
                                    </span>
                                </v-col>
                                <v-col cols="7" class="logo-name">
                                    <span class="cameron"> Cameron Williamson </span>
                                    <span class="hash"> #025622 </span>
                                </v-col>
                                <v-col cols="">
                                    <v-chip
                                        class="green-chip"
                                        color=""
                                        label
                                       
                                        >
                                        <v-icon left>
                                            mdi-account-circle
                                        </v-icon>
                                        60
                                    </v-chip>
                                </v-col>
                            </v-row>
                            <v-row class="ms-1 mt-1 mb-2">
                                <v-col cols="">
                                    <img src="../assets/info.svg" alt="">
                                </v-col>
                                <v-col cols="">
                                    <img src="../assets/flag.svg" alt="">
                                </v-col>
                                <v-col cols="">
                                <img src="../assets/octagon.svg" alt="">
                                </v-col>
                                <v-col cols="">
                                <img src="../assets/left.svg" alt="">
                                </v-col>
                            </v-row>
                        
                        
                        </div>
                    </v-card>
                    <v-card
                        class="user-card mb-2"
                        max-width="388"
                        max-height="147"
                        outlined
                        >
                        <div class="ms-5 mt-3">
                    
                            <v-row>
                                <v-col class="d-flex">
                                    <span class="mt-1" cols="1"
                                        ><img src="../assets/user-icon.svg" alt="">
                                    </span>
                                </v-col>
                                <v-col cols="7" class="logo-name">
                                    <span class="cameron"> Cameron Williamson </span>
                                    <span class="hash"> #025622 </span>
                                </v-col>
                                <v-col cols="">
                                    <v-chip
                                        class="green-chip"
                                        color=""
                                        label
                                        >
                                        <v-icon left>
                                            mdi-account-circle
                                        </v-icon>
                                        60
                                    </v-chip>
                                </v-col>
                            </v-row>
                            <v-row class="ms-1 mt-1 mb-2">
                                <v-col cols="">
                                    <img src="../assets/info.svg" alt="">
                                </v-col>
                                <v-col cols="">
                                    <img src="../assets/flag.svg" alt="">
                                </v-col>
                                <v-col cols="">
                                <img src="../assets/octagon.svg" alt="">
                                </v-col>
                                <v-col cols="">
                                <img src="../assets/left.svg" alt="">
                                </v-col>
                            </v-row>
                        
                        
                        </div>
                    </v-card>
                    </v-col>
                </v-div>
          </v-row>
        </v-col>
       
      </v-div>
    
     
    </v-container>
  </template>
  
  <script>
  import UploadController from "@/controllers/UploadController";
  import QuestionsController from "../controllers/QuestionsController";
  import LoBankController from "@/controllers/LoBankController";
  
  import { v4 as uuidv4 } from "uuid";
  export default {
    name: "AllAssessmentView",
    data() {
      return {
        imagePath: "../assets/cross.svg",
        imagePathicon: "../assets/user-icon.svg",
  
        
        
      };
    },
    watch: {
      dataTableOptions: {},
      search() {},
      tag() {},
    },
  
    computed: {
      getHeight() {
        return this.windowHeight;
      },
    },
    methods: {
      clearValue() {},
  
      async uploadToS3(imgUrl) {
        console.log("Image URL: ", imgUrl);
        console.log("Pre-Signed URL: ", this.preSignedUrl);
        const uploadResponse = await UploadController.uploadFile(
          this.preSignedUrl,
          this.selectedFile
        );
        if (this.uploadingForOption) {
          this.options[this.editedOptionIndex].option_value = imgUrl;
          this.options[this.editedOptionIndex].option_type = "IMAGE";
        } else {
          this.questionAssetUrl = imgUrl;
          this.questionAssetType = this.selectedFile.type;
          console.log(this.selectedFile.type);
        }
        this.uploadingForOption = false;
        this.uploadingMsg = "File uploaded";
        this.selectedFile = null;
        console.log("Upload Response: ", uploadResponse);
      },
      formbtn() {
        return this.formbtnBool === false ? "Create" : "Update";
      },
      async updateInput(id) {
        console.log("update called");
        //if (this.$refs.form.validate()) {
        const response = await QuestionsController.updateQuestion(
          {
            statement: this.questionName,
            question_type: this.questionType,
            questionDescription: this.questionDescription,
            lo_ids: this.selectedLOs,
            skill_id: this.skillId,
            subject_id: this.subject,
            correct_answer_score: this.correctAnswerScore,
            estimated_time:
              this.estimatedTime != "" ? parseInt(this.estimatedTime) : 0,
            blooms_taxonomy: this.bloomsTaxonomy,
            knowledge_level: this.knowledgeLevel,
            complexity_level: this.complexityLevel,
            difficulty_level: this.difficultyLevel,
            question_mtf_answers:
              this.questionType == "MATCH_THE_FOLLOWING" ? this.mtfAnswers : null,
            level_id: this.level,
            // correct_answer: this.getCorrectAnswer(),
            hint: this.hint,
            answer_explanation: this.answerExplanation,
            question_options: this.getOptions(),
          },
          id
        );
        console.log(response.data);
        if (response.data.success) {
          this.isCreatingQuestion = false;
          this.successMessage = "Question Updated Successfully";
          this.successDialog = true;
          this.createQuestionDialog = false;
          //this.fetchQuestions();
        } else {
          this.isCreatingQuestion = false;
          this.errorDialog = true;
        }
        // }
      },
  
      updateData(item) {
        this.editId = item.id; // selected id for edit
        this.formbtnBool = true; // change update/create btn value
        this.createQuestionDialog = true;
        this.questionType = item.question_type;
        this.skillId = item.skill_id;
        this.correctAnswerScore = item.correct_answer_score;
  
        this.estimatedTime =
          item.estimated_time != "" ? parseInt(item.estimated_time) : 0;
        this.bloomsTaxonomy =
          item.blooms_taxonomy != "" ? item.blooms_taxonomy : null;
        this.knowledgeLevel =
          item.knowledge_level != "" ? item.knowledge_level : null;
        this.complexityLevel =
          item.complexity_level != "" ? item.complexity_level : null;
        this.difficultyLevel =
          item.difficulty_level != "" ? item.difficulty_level : null;
        this.correct_answer = item.correct_answer;
        this.hint = item.hint;
        this.subject = item.subject_id;
        this.proficiencyLevel =
          item.proficiency_level != "" ? item.proficiency_level : null;
        this.level = item.level_id;
        this.options = item.question_options;
        this.mtfAnswers = item.question_mtf_answers;
        this.questionAssetType = item.mime_type;
        this.questionAssetUrl = item.s3_asset_urls;
        this.selectedFile = null;
        // this.selectedLOs = item.lo_ids data not comming
        this.answerExplanation = item.answer_explanation;
  
        setTimeout(() => {
          // This code will execute after a 1 second delay
          this.questionName = item.statement;
        }, 2000);
      },
      getDate(timeStamp) {
        return new Date(timeStamp).toString().substring(0, 16);
      },
      async deleteData(data) {
        //console.log("getting data", data);
        if (data.length == 1) {
          const response = await QuestionsController.deleteQuestion(data[0].id);
          if (response.data.success) {
            this.fetchQuestions();
            console.log(response);
          } else {
            alert(response.data.error);
          }
        } else {
          var ids = "";
          for (var i = 0; i < data.length; i++) {
            ids = ids + data[i].id;
            if (i != data.length - 1) {
              ids = ids + ",";
            }
          }
          const response = await QuestionsController.deleteBulkQuestion(ids);
          if (response.data.success) {
            this.fetchQuestions();
            console.log(response);
          } else {
            alert(response.data.error);
          }
        }
  
        //console.log("deleted", response);
        this.deleteDialog = false;
        this.selectedTableItems.length = "0";
      },
      async getLO() {
        const response = await LoBankController.getLO();
        //console.log(response);
        this.LOData = response.data.data.rows;
      },
  
      addOption() {
        this.options.push({
          option_key: this.getAlphabet(this.options.length),
          option_value: "Option " + (this.options.length + 1),
          option_type: "TEXT",
          is_correct: false,
          option_uuid: uuidv4(),
        });
        console.log(this.options);
      },
    },
  
    created() {},
  };
  </script>
 
  